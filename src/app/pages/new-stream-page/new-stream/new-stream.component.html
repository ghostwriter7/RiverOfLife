<app-page-header title="New Stream"/>

<form class="new-stream-form" [formGroup]="formGroup" (ngSubmit)="onSubmit()">
  <div class="form-field">
    <label for="title">Title</label>
    <input
      formControlName="title"
      id="title"
      placeholder="Enter title"
      type="text"
      [attr.data-testid]="testIds.TitleInput"
    >
  </div>

  <div class="form-field">
    <label for="description">Description</label>
    <textarea id="description" formControlName="description" placeholder="Enter description" rows="4"></textarea>
  </div>

  <div class="form-field">
    <label for="category">Category</label>
    <select
      formControlName="category"
      id="category"
      [attr.data-testid]="testIds.CategorySelect"
    >
      <option [value]="null" disabled>Select a category</option>
      @for (category of categories; track category) {
        <option [value]="category.value">{{ category.label }}</option>
      }
    </select>
  </div>

  @if (error(); as error) {
    <p class="error-message" [attr.data-testid]="testIds.ErrorMessage">{{ error }}</p>
  }

  <button
    class="button accent wide"
    type="submit"
    [attr.data-testid]="testIds.SubmitButton"
    [disabled]="!formGroup.valid"
  >
    Create
  </button>
</form>

